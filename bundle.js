!function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r.r(t);var i=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.height=t,this.width=r,this.fieldData=this.createField()}var t,r,i;return t=e,(r=[{key:"createField",value:function(){for(var e=[],t=0;t<this.height;t++){e.push([]);for(var r=0;r<this.width;r++)e[t][r]=0}return e}},{key:"renderField",value:function(){for(var e=document.querySelector("#field");e.firstChild;)e.removeChild(e.firstChild);for(var t=0;t<this.height;t++)for(var r=0;r<this.width;r++){var n=document.createElement("div");n.setAttribute("class","flex-cell"),n.setAttribute("id","cell-".concat(t,"-").concat(r)),1===this.fieldData[t][r]&&(n.style.backgroundColor="red"),e.append(n)}}},{key:"mergeFieldAndFigure",value:function(e){for(var t=0;t<e.type.length;t++)for(var r=0;r<e.type[0].length;r++)1===e.type[t][r]&&(this.fieldData[e.y+t][e.x+r]=e.type[t][r])}},{key:"hasLeftCollisions",value:function(e){for(var t=0;t<e.type.length;t++)for(var r=0;r<e.type[0].length;r++)if(1===e.type[t][r]&&void 0===this.fieldData[0][e.x+r-1]||1===e.type[t][r]&&1===this.fieldData[e.y+t][e.x+r-1])return!0;return!1}},{key:"hasRightCollisions",value:function(e){for(var t=e.type[0].length;t>=0;t--)for(var r=0;r<e.type.length;r++)if(1===e.type[r][t]&&void 0===this.fieldData[0][e.x+t+1]||1===e.type[r][t]&&1===this.fieldData[e.y+r][e.x+t+1])return!0;return!1}},{key:"hasDownCollisions",value:function(e){for(var t=0;t<e.type.length;t++)for(var r=0;r<e.type[0].length;r++)if(1===e.type[t][r]&&e.y+t>=this.fieldData.length-1||1===e.type[t][r]&&1===this.fieldData[e.y+t+1][e.x+r])return this.mergeFieldAndFigure(e,this.fieldData),!0;return!1}},{key:"hasRotateCollisions",value:function(e){if(e.x<0||e.x+e.type.length-1>=this.fieldData[0].length)return!0;for(var t=0;t<e.type.length;t++)for(var r=0;r<e.type[0].length;r++)if(1===this.fieldData[e.y+t][e.x+r])return!0;return!1}},{key:"fullRowCleanup",value:function(){var e=this;this.fieldData.forEach((function(t,r){t.every((function(e){return 1===e}))&&(e.fieldData.splice(r,1),e.fieldData.unshift(Array(10).fill(0)),e.renderField(e.fieldData),document.querySelector("#score").innerHTML=+document.querySelector("#score").innerText+100)}))}},{key:"isGameOver",value:function(e){for(var t=0;t<e.type.length;t++)for(var r=0;r<e.type[0].length;r++)if(1===this.fieldData[e.y+t][e.x+r])return document.onkeydown=null,document.querySelector("body").style.backgroundColor="brown",document.querySelector("#game-over").style.display="",clearInterval(document.querySelector("#main").getAttribute("timerID")),!0;return!1}}])&&n(t.prototype,r),i&&n(t,i),e}();function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}function l(e,t,r){if(e!==t)throw new TypeError("Private static access of wrong provenance");return r.get?r.get.call(e):r.value}var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type=t,this.x=4,this.y=0}return o(e,null,[{key:"create",value:function(){return new e(l(e,e,s)[Math.floor(Math.random()*Math.floor(l(e,e,s).length))])}}]),o(e,[{key:"down",value:function(){this.eraseFigure(),this.y+=1,this.renderFigure()}},{key:"left",value:function(){this.eraseFigure(),this.x-=1,this.renderFigure()}},{key:"right",value:function(){this.eraseFigure(),this.x+=1,this.renderFigure()}},{key:"rotate",value:function(){this.eraseFigure(),this.type=this.type.reverse();for(var e=0;e<this.type.length;e++)for(var t=0;t<e;t++){var r=this.type[e][t];this.type[e][t]=this.type[t][e],this.type[t][e]=r}this.renderFigure()}},{key:"renderFigure",value:function(){for(var e=0;e<this.type.length;e++)for(var t=0;t<this.type[0].length;t++)0!==this.type[e][t]&&(document.querySelector("#cell-".concat(this.y+e,"-").concat(this.x+t," ")).style.backgroundColor="red")}},{key:"eraseFigure",value:function(){for(var e=0;e<this.type.length;e++)for(var t=0;t<this.type[0].length;t++)0!==this.type[e][t]&&(document.querySelector("#cell-".concat(this.y+e,"-").concat(this.x+t," ")).style=null)}}]),e}(),s={writable:!0,value:[[[1,1],[1,1]],[[0,0,1],[1,1,1],[0,0,0]],[[1,0,0],[1,1,1],[0,0,0]],[[1,0,0],[1,1,0],[0,1,0]],[[0,1,0],[1,1,0],[1,0,0]],[[0,1,0],[1,1,1],[0,0,0]],[[0,1,0,0],[0,1,0,0],[0,1,0,0],[0,1,0,0]]]},f=new i(20,10);f.renderField();var c=u.create();function h(){if(f.hasDownCollisions(c)){f.fullRowCleanup();var e=u.create();e.renderFigure(),f.isGameOver(e),c=e}else c.down()}c.renderFigure(),document.onkeydown=function(e){switch(e.which){case 37:f.hasLeftCollisions(c)||c.left();break;case 38:f.hasRotateCollisions(c)||c.rotate();break;case 39:f.hasRightCollisions(c)||c.right();break;case 40:h();break;default:return}e.preventDefault()},document.querySelector("#main").setAttribute("timerID",setInterval(h,500))}]);